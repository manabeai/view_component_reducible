<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salon de Beaute - 予約</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; }
        .font-serif { font-family: 'Playfair+Display', serif; }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        [hidden] { display: none !important; }
    </style>
</head>
<body class="min-h-screen bg-stone-50 text-stone-900 antialiased">

    <!-- 予約完了画面 (初期は非表示) -->
    <div id="booking-complete" class="fixed inset-0 z-50 flex items-center justify-center bg-stone-50 p-6 text-center" hidden>
        <div class="max-w-md rounded-3xl bg-white p-10 shadow-xl border border-stone-100">
            <div class="mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-emerald-100 text-emerald-600">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
            </div>
            <h1 class="text-2xl font-bold text-stone-800">予約が完了しました</h1>
            <p class="mt-4 text-stone-600">
                ご予約ありがとうございます。<br />
                ご登録のメールアドレスに確認メールをお送りしました。
            </p>
            <button onclick="location.reload()" class="mt-8 w-full rounded-xl bg-stone-800 py-4 font-semibold text-white transition-all hover:bg-stone-700">
                マイページへ戻る
            </button>
        </div>
    </div>

    <!-- メインコンテンツ -->
    <div id="main-content">
        <header class="sticky top-0 z-10 border-b border-stone-200 bg-white/80 backdrop-blur-md">
            <div class="mx-auto max-w-5xl px-6 py-4">
                <h1 class="text-xl font-serif font-bold tracking-tight text-stone-800">Salon de Beaute</h1>
            </div>
        </header>

        <main class="mx-auto max-w-5xl px-6 py-8">
            <div class="flex flex-col gap-8 lg:flex-row lg:items-start">
                
                <!-- メイン予約フロー -->
                <div class="flex-1 space-y-8">
                    
                    <!-- 1. 日付選択 -->
                    <section class="rounded-3xl border border-stone-200 bg-white p-6 shadow-sm md:p-8">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="flex h-10 w-10 items-center justify-center rounded-full bg-amber-50 text-amber-700">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                            </div>
                            <div>
                                <h2 class="text-lg font-bold">ご希望の日程</h2>
                                <p class="text-xs text-stone-500">ご来店日を選択してください</p>
                            </div>
                        </div>

                        <div id="calendar-grid" class="grid grid-cols-4 gap-2 sm:grid-cols-7">
                            <!-- JSで生成 -->
                        </div>
                    </section>

                    <!-- 2. 時間選択 -->
                    <section id="section-time" class="hidden animate-in fade-in rounded-3xl border border-stone-200 bg-white p-6 shadow-sm md:p-8">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="flex h-10 w-10 items-center justify-center rounded-full bg-amber-50 text-amber-700">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                            </div>
                            <div>
                                <h2 class="text-lg font-bold">ご希望の時間</h2>
                                <p id="time-subtext" class="text-xs text-stone-500"></p>
                            </div>
                        </div>

                        <div id="time-grid" class="grid grid-cols-3 gap-3 sm:grid-cols-4 md:grid-cols-5">
                            <!-- JSで生成 -->
                        </div>
                    </section>

                    <!-- 3. スタッフ選択 -->
                    <section id="section-staff" class="hidden animate-in fade-in rounded-3xl border border-stone-200 bg-white p-6 shadow-sm md:p-8">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="flex h-10 w-10 items-center justify-center rounded-full bg-amber-50 text-amber-700">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                            </div>
                            <div>
                                <h2 class="text-lg font-bold">担当スタッフ</h2>
                                <p id="staff-subtext" class="text-xs text-stone-500"></p>
                            </div>
                        </div>

                        <div id="staff-grid" class="grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
                            <!-- JSで生成 -->
                        </div>
                    </section>
                </div>

                <!-- 右サイド：予約サマリー -->
                <aside class="sticky top-24 w-full lg:w-80">
                    <div class="rounded-3xl border border-stone-200 bg-white p-6 shadow-lg">
                        <h2 class="text-sm font-bold tracking-wider text-stone-500 uppercase border-b border-stone-100 pb-3">
                            ご予約内容の確認
                        </h2>
                        
                        <dl class="mt-6 space-y-6">
                            <div class="flex items-start justify-between">
                                <dt class="text-xs font-medium text-stone-400">ご来店予定日</dt>
                                <dd id="summary-day" class="text-right text-sm font-bold text-stone-300">未選択</dd>
                            </div>
                            <div class="flex items-start justify-between">
                                <dt class="text-xs font-medium text-stone-400">お時間</dt>
                                <dd id="summary-time" class="text-right text-sm font-bold text-stone-300">未選択</dd>
                            </div>
                            <div class="flex items-start justify-between">
                                <dt class="text-xs font-medium text-stone-400">担当者</dt>
                                <dd id="summary-staff" class="text-right text-sm font-bold text-stone-300">未選択</dd>
                            </div>
                        </dl>

                        <div class="mt-8 space-y-3">
                            <div class="rounded-xl bg-stone-50 p-4">
                                <div class="flex gap-2 text-[11px] text-stone-500 italic">
                                    <svg class="shrink-0 text-amber-600" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                                    <span>キャンセルは前日までにお願いいたします。当日キャンセルはキャンセル料が発生する場合がございます。</span>
                                </div>
                            </div>

                            <button
                                id="btn-submit"
                                disabled
                                class="flex w-full items-center justify-center gap-2 rounded-xl py-4 font-bold transition-all shadow-md bg-stone-100 text-stone-400 cursor-not-allowed"
                            >
                                予約を確定する
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                            </button>
                        </div>
                    </div>
                </aside>

            </div>
        </main>
        
        <footer class="mt-12 border-t border-stone-200 bg-stone-100 py-10 text-center">
            <p class="text-xs text-stone-400">© 2024 Salon de Beaute Inc. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // --- データ定義 ---
        const staffList = [
            { id: 'kenji', name: 'KENJI', role: '代表 / トップスタイリスト', desc: 'ショートカットやボブが得意です。' },
            { id: 'yuki', name: 'Yuki', role: 'ディレクター', desc: '似合わせカラーと髪質改善を提案します。' },
            { id: 'mio', name: 'Mio', role: 'スタイリスト', desc: '丁寧なカウンセリングを大切にしています。' },
        ];

        const timeSlots = ['10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00'];

        // --- ステート管理 ---
        let state = {
            selectedDay: null,
            selectedTime: null,
            selectedStaff: null
        };

        // --- DOM要素 ---
        const calendarGrid = document.getElementById('calendar-grid');
        const timeGrid = document.getElementById('time-grid');
        const staffGrid = document.getElementById('staff-grid');
        const sectionTime = document.getElementById('section-time');
        const sectionStaff = document.getElementById('section-staff');
        const summaryDay = document.getElementById('summary-day');
        const summaryTime = document.getElementById('summary-time');
        const summaryStaff = document.getElementById('summary-staff');
        const btnSubmit = document.getElementById('btn-submit');

        // --- 初期化 ---
        function init() {
            renderCalendar();
            renderTimeSlots();
            renderStaffList();
            
            btnSubmit.addEventListener('click', () => {
                document.getElementById('main-content').hidden = true;
                document.getElementById('booking-complete').hidden = false;
            });
        }

        // --- レンダリング関数 ---

        function renderCalendar() {
            const today = new Date();
            const weekdays = ['日', '月', '火', '水', '木', '金', '土'];
            calendarGrid.innerHTML = '';

            for (let i = 0; i < 28; i++) {
                const date = new Date();
                date.setDate(today.getDate() + i);
                const dayNum = date.getDate();
                const weekday = weekdays[date.getDay()];
                const status = Math.random() > 0.3 ? 'ok' : 'few';

                const btn = document.createElement('button');
                btn.className = `calendar-day-btn flex flex-col items-center justify-center rounded-2xl border py-3 transition-all border-stone-100 bg-stone-50 hover:border-amber-200 hover:bg-white`;
                btn.dataset.day = dayNum;
                
                let weekdayColor = 'text-stone-500';
                if (weekday === '日') weekdayColor = 'text-rose-500';
                if (weekday === '土') weekdayColor = 'text-blue-500';

                btn.innerHTML = `
                    <span class="text-[10px] ${weekdayColor}">${weekday}</span>
                    <span class="text-lg font-bold leading-none my-1">${dayNum}</span>
                    <span class="text-[10px] font-bold ${status === 'ok' ? 'text-emerald-500' : 'text-amber-500'}">
                        ${status === 'ok' ? '◯' : '△'}
                    </span>
                `;

                btn.onclick = () => selectDay(dayNum, btn);
                calendarGrid.appendChild(btn);
            }
        }

        function renderTimeSlots() {
            timeGrid.innerHTML = '';
            timeSlots.forEach(time => {
                const btn = document.createElement('button');
                btn.className = `time-slot-btn rounded-xl border py-3 text-sm font-semibold transition-all border-stone-100 bg-stone-50 text-stone-700 hover:border-amber-300 hover:bg-white`;
                btn.innerText = time;
                btn.onclick = () => selectTime(time, btn);
                timeGrid.appendChild(btn);
            });
        }

        function renderStaffList() {
            staffGrid.innerHTML = '';
            staffList.forEach(staff => {
                const btn = document.createElement('button');
                btn.className = `staff-card-btn relative flex flex-col items-start rounded-2xl border p-4 text-left transition-all border-stone-100 bg-stone-50 hover:border-amber-200 hover:bg-white shadow-sm`;
                btn.innerHTML = `
                    <div class="flex items-center gap-3">
                        <div class="h-12 w-12 rounded-full bg-stone-200 overflow-hidden">
                            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=${staff.id}" alt="${staff.name}">
                        </div>
                        <div>
                            <p class="text-[10px] font-bold text-amber-700">${staff.role}</p>
                            <h3 class="font-bold text-stone-800">${staff.name}</h3>
                        </div>
                    </div>
                    <p class="mt-3 text-xs leading-relaxed text-stone-500">${staff.desc}</p>
                    <div class="check-icon absolute top-3 right-3 text-amber-600 hidden">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                    </div>
                `;
                btn.onclick = () => selectStaff(staff, btn);
                staffGrid.appendChild(btn);
            });
        }

        // --- アクション ---

        function selectDay(day, element) {
            state.selectedDay = day;
            state.selectedTime = null;
            state.selectedStaff = null;

            // UI更新
            document.querySelectorAll('.calendar-day-btn').forEach(el => {
                el.classList.remove('border-amber-600', 'bg-amber-50', 'ring-1', 'ring-amber-600');
            });
            element.classList.add('border-amber-600', 'bg-amber-50', 'ring-1', 'ring-amber-600');

            sectionTime.classList.remove('hidden');
            document.getElementById('time-subtext').innerText = `Day ${day} の空き状況`;
            
            // 次のセクションをリセット
            sectionStaff.classList.add('hidden');
            resetSummary();
            updateSummary();
        }

        function selectTime(time, element) {
            state.selectedTime = time;
            state.selectedStaff = null;

            document.querySelectorAll('.time-slot-btn').forEach(el => {
                el.classList.remove('border-amber-600', 'bg-amber-600', 'text-white', 'shadow-md');
            });
            element.classList.add('border-amber-600', 'bg-amber-600', 'text-white', 'shadow-md');

            sectionStaff.classList.remove('hidden');
            document.getElementById('staff-subtext').innerText = `${time} 開始可能なスタッフ`;
            
            updateSummary();
        }

        function selectStaff(staff, element) {
            state.selectedStaff = staff;

            document.querySelectorAll('.staff-card-btn').forEach(el => {
                el.classList.remove('border-amber-600', 'bg-amber-50', 'ring-1', 'ring-amber-600');
                el.querySelector('.check-icon').classList.add('hidden');
            });
            element.classList.add('border-amber-600', 'bg-amber-50', 'ring-1', 'ring-amber-600');
            element.querySelector('.check-icon').classList.remove('hidden');

            updateSummary();
        }

        function updateSummary() {
            if (state.selectedDay) {
                summaryDay.innerText = `2024年10月${state.selectedDay}日`;
                summaryDay.classList.remove('text-stone-300');
            }
            if (state.selectedTime) {
                summaryTime.innerText = state.selectedTime;
                summaryTime.classList.remove('text-stone-300');
            }
            if (state.selectedStaff) {
                summaryStaff.innerHTML = `${state.selectedStaff.name}<div class="text-[10px] font-normal text-stone-500">${state.selectedStaff.role}</div>`;
                summaryStaff.classList.remove('text-stone-300');

                // ボタン有効化
                btnSubmit.disabled = false;
                btnSubmit.classList.remove('bg-stone-100', 'text-stone-400', 'cursor-not-allowed');
                btnSubmit.classList.add('bg-amber-700', 'text-white', 'hover:bg-amber-800');
            } else {
                btnSubmit.disabled = true;
                btnSubmit.className = "flex w-full items-center justify-center gap-2 rounded-xl py-4 font-bold transition-all shadow-md bg-stone-100 text-stone-400 cursor-not-allowed";
            }
        }

        function resetSummary() {
            summaryTime.innerText = '未選択';
            summaryTime.classList.add('text-stone-300');
            summaryStaff.innerText = '未選択';
            summaryStaff.classList.add('text-stone-300');
            
            document.querySelectorAll('.time-slot-btn').forEach(el => {
                el.classList.remove('border-amber-600', 'bg-amber-600', 'text-white', 'shadow-md');
            });
            document.querySelectorAll('.staff-card-btn').forEach(el => {
                el.classList.remove('border-amber-600', 'bg-amber-50', 'ring-1', 'ring-amber-600');
                el.querySelector('.check-icon').classList.add('hidden');
            });
        }

        window.onload = init;
    </script>
</body>
</html>